define("static/todo/src/vendor/backbone.localStorage",["sea-modules/gallery/underscore/1.4.4/underscore","sea-modules/jquery/jquery/1.10.1/jquery","sea-modules/gallery/backbone/1.0.0/backbone"],function(e){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function r(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}var o=e("sea-modules/gallery/underscore/1.4.4/underscore"),n=e("sea-modules/jquery/jquery/1.10.1/jquery"),a=e("sea-modules/gallery/backbone/1.0.0/backbone");return a.LocalStorage=window.Store=function(e){this.name=e;var t=this.localStorage().getItem(this.name);this.records=t&&t.split(",")||[]},o.extend(a.LocalStorage.prototype,{save:function(){this.localStorage().setItem(this.name,this.records.join(","))},create:function(e){return e.id||(e.id=r(),e.set(e.idAttribute,e.id)),this.localStorage().setItem(this.name+"-"+e.id,JSON.stringify(e)),this.records.push(e.id.toString()),this.save(),this.find(e)},update:function(e){return this.localStorage().setItem(this.name+"-"+e.id,JSON.stringify(e)),o.include(this.records,e.id.toString())||this.records.push(e.id.toString()),this.save(),this.find(e)},find:function(e){return this.jsonData(this.localStorage().getItem(this.name+"-"+e.id))},findAll:function(){return o(this.records).chain().map(function(e){return this.jsonData(this.localStorage().getItem(this.name+"-"+e))},this).compact().value()},destroy:function(e){return e.isNew()?!1:(this.localStorage().removeItem(this.name+"-"+e.id),this.records=o.reject(this.records,function(t){return t===e.id.toString()}),this.save(),e)},localStorage:function(){return localStorage},jsonData:function(e){return e&&JSON.parse(e)}}),a.LocalStorage.sync=window.Store.sync=a.localSync=function(e,t,r){var o,s,c=t.localStorage||t.collection.localStorage,i=n.Deferred&&n.Deferred();try{switch(e){case"read":o=void 0!=t.id?c.find(t):c.findAll();break;case"create":o=c.create(t);break;case"update":o=c.update(t);break;case"delete":o=c.destroy(t)}}catch(l){s=l.code===DOMException.QUOTA_EXCEEDED_ERR&&0===window.localStorage.length?"Private browsing is unsupported":l.message}return o?(r&&r.success&&("0.9.10"===a.VERSION?r.success(t,o,r):r.success(o)),i&&i.resolve(o)):(s=s?s:"Record Not Found",r&&r.error&&("0.9.10"===a.VERSION?r.error(t,s,r):r.error(s)),i&&i.reject(s)),r&&r.complete&&r.complete(o),i&&i.promise()},a.ajaxSync=a.sync,a.getSyncMethod=function(e){return e.localStorage||e.collection&&e.collection.localStorage?a.localSync:a.ajaxSync},a.sync=function(e,t,r){return a.getSyncMethod(t).apply(this,[e,t,r])},a.LocalStorage});